# -*- coding: utf-8 -*-
#
# This file is part of Zenodo.
# Copyright (C) 2015 CERN.
#
# Zenodo is free software; you can redistribute it
# and/or modify it under the terms of the GNU General Public License as
# published by the Free Software Foundation; either version 2 of the
# License, or (at your option) any later version.
#
# Zenodo is distributed in the hope that it will be
# useful, but WITHOUT ANY WARRANTY; without even the implied warranty of
# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
# General Public License for more details.
#
# You should have received a copy of the GNU General Public License
# along with Zenodo; if not, write to the
# Free Software Foundation, Inc., 59 Temple Place, Suite 330, Boston,
# MA 02111-1307, USA.
#
# In applying this license, CERN does not
# waive the privileges and immunities granted to it by virtue of its status
# as an Intergovernmental Organization or submit itself to any jurisdiction.

"""Proxy for DOI citation formatter."""

from __future__ import absolute_import, print_function

from .views import blueprint


class ZenodoCitationFormatter(object):
    """Zenodo-CitationFormatter extension."""

    def __init__(self, app=None):
        """Extension initialization."""
        if app:
            self.init_app(app)

    def init_app(self, app):
        """Flask application initialization."""
        self.init_config(app)
        app.register_blueprint(blueprint)
        app.extensions['zenodo-citationformatter'] = self

    def init_config(self, app):
        """Initialize configuration."""
        app.config.setdefault('CITATIONFORMATTER_DEFAULT_LANG', 'en-US')
        app.config.setdefault('CITATIONFORMATTER_DEFAULT_STYLE', 'apa')
        app.config.setdefault(
            'ZENODO_CITATIONFORMATTER_BASE_TEMPLATE',
            app.config.get('BASE_TEMPLATE',
                           'zenodo_citationformatter/base.html'))
        app.config.setdefault(
            "CITATIONFORMATTER_LANGS", [
                'af-ZA',
                'ar-AR',
                'bg-BG',
                'ca-AD',
                'cs-CZ',
                'da-DK',
                'de-AT',
                'de-CH',
                'de-DE',
                'el-GR',
                'en-GB',
                'en-US',
                'es-ES',
                'et-EE',
                'eu',
                'fa-IR',
                'fi-FI',
                'fr-CA',
                'fr-FR',
                'he-IL',
                'hu-HU',
                'is-IS',
                'it-IT',
                'ja-JP',
                'km-KH',
                'ko-KR',
                'mn-MN',
                'nb-NO',
                'nl-NL',
                'nn-NO',
                'pl-PL',
                'pt-BR',
                'pt-PT',
                'ro-RO',
                'ru-RU',
                'sk-SK',
                'sl-SI',
                'sr-RS',
                'sv-SE',
                'th-TH',
                'tr-TR',
                'uk-UA',
                'vi-VN',
                'zh-CN',
                'zh-TW',
            ])
        app.config.setdefault("CITATIONFORMATTER_STYLES", [
                'acm-sig-proceedings',
                'acm-sig-proceedings-long-author-list',
                'acm-sigchi-proceedings',
                'acm-siggraph',
                'acm-transactions-on-information-systems',
                'acs-chemical-biology',
                'acs-nano',
                'acta-materialia',
                'acta-naturae',
                'acta-palaeontologica-polonica',
                'acta-universitatis-agriculturae-sueciae',
                'administrative-science-quarterly',
                'advanced-engineering-materials',
                'advanced-materials',
                'advances-in-complex-systems',
                'aging-cell',
                'aids',
                'all',
                'allergy',
                'alternatives-to-animal-experimentation',
                'american-anthropological-association',
                'american-antiquity',
                'american-association-for-cancer-research',
                'american-association-of-petroleum-geologists',
                'american-chemical-society',
                'american-chemical-society-with-titles',
                'american-chemical-society-with-titles-brackets',
                'american-geophysical-union',
                'american-heart-association',
                'american-institute-of-physics',
                'american-journal-of-archaeology',
                'american-journal-of-botany',
                'american-journal-of-epidemiology',
                'american-journal-of-human-genetics',
                'american-journal-of-medical-genetics',
                'american-journal-of-pathology',
                'american-journal-of-physical-anthropology',
                'american-journal-of-political-science',
                'american-medical-association',
                'american-medical-association-alphabetical',
                'american-medical-association-no-et-al',
                'american-medical-association-no-url',
                'american-meteorological-society',
                'american-physics-society',
                'american-physiological-society',
                'american-phytopathological-society',
                'american-phytopathological-society-numeric',
                'american-society-for-microbiology',
                'american-society-of-civil-engineers',
                'american-society-of-mechanical-engineers',
                'amiens',
                'analytica-chimica-acta',
                'anesthesia-and-analgesia',
                'angewandte-chemie',
                'animal-behaviour',
                'annalen-des-naturhistorischen-museums-wien',
                'annales',
                'annals-of-biomedical-engineering',
                'annals-of-botany',
                'annals-of-neurology',
                'annals-of-the-association-of-american-geographers',
                'annual-reviews-alphabetically',
                'annual-reviews-by-appearance',
                'antarctic-science',
                'antonie-van-leeuwenhoek',
                'apa',
                'apa5th',
                'applied-spectroscopy',
                'apsa',
                'archives-of-physical-medicine-and-rehabilitation',
                'art-history',
                'arzneimitteltherapie',
                'asa',
                'asa-cssa-sssa',
                'associacao-brasileira-de-normas-tecnicas',
                'associacao-brasileira-de-normas-tecnicas-ufmg-face-full',
                'associacao-brasileira-de-normas-tecnicas-ufmg-face-initials',
                'associacao-brasileira-de-normas-tecnicas-ufpr',
                'australian-historical-studies',
                'australian-journal-of-grape-and-wine-research',
                'australian-legal',
                'avian-pathology',
                'aviation-space-and-environmental-medicine',
                'basic-and-applied-ecology',
                'bba-biochimica-et-biophysica-acta',
                'behavioral-ecology-and-sociobiology',
                'bibtex',
                'biochemistry',
                'bioconjugate-chemistry',
                'bioelectromagnetics',
                'bioessays',
                'bioinformatics',
                'biological-psychiatry',
                'bioorganic-and-medicinal-chemistry-letters',
                'biophysical-journal',
                'bioresource-technology',
                'biotechnology-and-bioengineering',
                'biotropica',
                'blank',
                'blood',
                'bluebook-inline',
                'bluebook-law-review',
                'bluebook2',
                'bmc-bioinformatics',
                'bmj',
                'bone',
                'bone-marrow-transplantation',
                'brain',
                'brazilian-journal-of-nature-conservation',
                'briefings-in-bioinformatics',
                'british-ecological-society',
                'british-journal-of-anaesthesia',
                'british-journal-of-cancer',
                'british-journal-of-haematology',
                'british-journal-of-pharmacology',
                'british-journal-of-political-science',
                'british-psychological-society',
                'building-structure',
                'bulletin-de-la-societe-prehistorique-francaise',
                'canadian-journal-of-fisheries-and-aquatic-sciences',
                'cancer-chemotherapy-and-pharmacology',
                'catholic-biblical-association',
                'cell',
                'cell-calcium',
                'cell-numeric',
                'cell-transplantation',
                'centaurus',
                'cerebral-cortex',
                'chemical-research-in-toxicology',
                'chest',
                'chicago-annotated-bibliography',
                'chicago-author-date',
                'chicago-author-date-basque',
                'chicago-author-date-de',
                'chicago-dated-note-biblio-no-ibid',
                'chicago-fullnote-bibliography',
                'chicago-fullnote-bibliography-no-ibid',
                'chicago-library-list',
                'chicago-note-biblio-no-ibid',
                'chicago-note-bibliography',
                'chicago-quick-copy',
                'chinese-gb7714-1987-numeric',
                'chinese-gb7714-2005-numeric',
                'circulation',
                'cities',
                'climatic-change',
                'clinical-cancer-research',
                'clinical-infectious-diseases',
                'clinical-neurophysiology',
                'clinical-orthopaedics-and-related-research',
                'cns-and-neurological-disorders-drug-targets',
                'cold-spring-harbor-laboratory-press',
                'conservation-biology',
                'copernicus-publications',
                'council-of-science-editors',
                'council-of-science-editors-author-date',
                'critical-care-medicine',
                'culture-medicine-and-psychiatry',
                'current-opinion',
                'current-protocols',
                'currents-in-biblical-research',
                'cytometry',
                'dendrochronologia',
                'din-1505-2',
                'din-1505-2-numeric',
                'diplo',
                'drug-and-alcohol-dependence',
                'drugs-of-today',
                'early-medieval-europe',
                'earth-surface-processes-and-landforms',
                'ecological-modelling',
                'ecology',
                'ecology-letters',
                'ecoscience',
                'ecosystems',
                'elsevier-harvard',
                'elsevier-harvard-without-titles',
                'elsevier-radiological',
                'elsevier-vancouver',
                'elsevier-with-titles',
                'elsevier-with-titles-alphabetical',
                'elsevier-without-titles',
                'emerald-harvard',
                'entomologia-experimentalis-et-applicata',
                'environmental-and-engineering-geoscience',
                'environmental-and-experimental-botany',
                'environmental-conservation',
                'environmental-health-perspectives',
                'environmental-microbiology',
                'epidemiologie-et-sante-animale',
                'ergoscience',
                'ethics-book-reviews',
                'european-cells-and-materials',
                'european-heart-journal',
                'european-journal-of-immunology',
                'european-journal-of-neuroscience',
                'european-journal-of-ophthalmology',
                'european-journal-of-radiology',
                'european-journal-of-soil-science',
                'european-respiratory-journal',
                'european-retail-research',
                'european-union-format',
                'eye',
                'fachhochschule-vorarlberg',
                'febs-journal',
                'fems',
                'fertility-and-sterility',
                'fish-and-fisheries',
                'foerster-geisteswissenschaft',
                'fold-and-r',
                'french1',
                'french2',
                'french3',
                'french4',
                'freshwater-biology',
                'frontiers',
                'fungal-ecology',
                'future-medicine-journals',
                'gastroenterology',
                'geneses',
                'genetics',
                'genome-biology',
                'genome-biology-and-evolution',
                'geochimica-et-cosmochimica-acta',
                'geoderma',
                'geological-magazine',
                'geological-society-of-america',
                'geology',
                'geomorphology',
                'geopolitics',
                'global-change-biology',
                'global-ecology-and-biogeography',
                'gost-r-7-0-5-2008',
                'gost-r-7-0-5-2008-csl-1-0',
                'gost-r-7-0-5-2008-numeric',
                'graefes-archive-clinical-and-experimental-ophthalmology',
                'harvard-anglia-ruskin',
                'harvard-cardiff-university',
                'harvard-european-archaeology',
                'harvard-imperial-college-london',
                'harvard-institut-fur-praxisforschung-de',
                'harvard-kings-college-london',
                'harvard-leeds-metropolitan-university',
                'harvard-limerick',
                'harvard-manchester-business-school',
                'harvard-oxford-brookes-university',
                'harvard-sheffield',
                'harvard-sheffield1',
                'harvard-staffordshire-university',
                'harvard-university-of-gloucestershire',
                'harvard-university-of-leeds',
                'harvard-university-of-sunderland',
                'harvard-university-of-the-west-of-england',
                'harvard-university-of-wolverhampton',
                'harvard-university-west-london',
                'harvard1',
                'harvard1-unisa-gbfe',
                'harvard1de',
                'harvard3',
                'harvard7de',
                # split line
                'hawaii-international-conference-'
                'on-system-sciences-proceedings',
                'health-services-research',
                'hepatology',
                'heredity',
                'histoire-at-politique',
                'histoire-et-mesure',
                'history-and-theory',
                'history-of-the-human-sciences',
                'hong-kong-journal-of-radiology',
                'hormone-and-metabolic-research',
                'human-resource-management-journal',
                'hwr-berlin',
                'hydrogeology-journal',
                'hydrological-sciences-journal',
                'hypotheses-in-the-life-sciences',
                'ieee',
                'ieee-w-url',
                'immunological-reviews',
                'inflammatory-bowel-diseases',
                'information-communication-and-society',
                'institute-of-physics-harvard',
                'institute-of-physics-numeric',
                'inter-research-science-center',
                'inter-ro',
                'international-journal-of-audiology',
                'international-journal-of-cancer',
                'international-journal-of-exercise-science',
                'international-journal-of-hydrogen-energy',
                'international-journal-of-production-economics',
                'international-journal-of-psychoanalysis',
                'international-journal-of-radiation-oncology-biology-physics',
                'international-journal-of-solids-and-structures',
                'international-journal-of-tropical-biology-and-conservation',
                'international-organization',
                'international-pig-veterinary-society-congress-proceedings',
                'international-studies-association',
                'investigative-radiology',
                'invisu',
                'irish-historical-studies',
                'iso690-author-date-cs',
                'iso690-author-date-en',
                'iso690-author-date-fr',
                'iso690-numeric-cs',
                'iso690-numeric-en',
                'iso690-numeric-fr',
                'iso690-numeric-lt',
                'iso690-numeric-sk',
                'javnost-the-public',
                'journal-of-alzheimers-disease',
                'journal-of-applied-animal-science',
                'journal-of-applied-ecology',
                'journal-of-archaeological-research',
                'journal-of-bacteriology',
                'journal-of-biological-chemistry',
                'journal-of-chemical-ecology',
                'journal-of-clinical-investigation',
                'journal-of-clinical-oncology',
                'journal-of-community-health',
                'journal-of-dental-research',
                'journal-of-elections-public-opinion-and-parties',
                'journal-of-evolutionary-biology',
                'journal-of-field-ornithology',
                'journal-of-fish-diseases',
                'journal-of-food-protection',
                'journal-of-forensic-sciences',
                'journal-of-geography-in-higher-education',
                'journal-of-health-economics',
                'journal-of-hearing-science',
                'journal-of-hellenic-studies',
                'journal-of-hepatology',
                'journal-of-mammalogy',
                'journal-of-management-information-systems',
                'journal-of-marketing',
                'journal-of-molecular-biology',
                'journal-of-molecular-endocrinology',
                'journal-of-neurophysiology',
                'journal-of-neurosurgery',
                'journal-of-orthopaedic-trauma',
                'journal-of-paleontology',
                'journal-of-petrology',
                'journal-of-pollination-ecology',
                'journal-of-pragmatics',
                'journal-of-psychiatry-and-neuroscience',
                'journal-of-shoulder-and-elbow-surgery',
                'journal-of-social-archaeology',
                'journal-of-studies-on-alcohol-and-drugs',
                'journal-of-superconductivity-and-novel-magnetism',
                'journal-of-the-academy-of-nutrition-and-dietetics',
                'journal-of-the-air-and-waste-management-association',
                'journal-of-the-american-college-of-cardiology',
                'journal-of-the-american-society-of-nephrology',
                'journal-of-the-american-water-resources-association',
                'journal-of-the-royal-anthropological-institute',
                'journal-of-the-torrey-botanical-society',
                'journal-of-thrombosis-and-haemostasis',
                'journal-of-tropical-ecology',
                'journal-of-vertebrate-paleontology',
                'journal-of-wildlife-diseases',
                'journal-of-wildlife-management',
                'journalistica',
                'juristische-zitierweise-deutsch',
                'karger-journals',
                'karger-journals-author-date',
                'kidney-international',
                'knee-surgery-sports-traumatology-arthroscopy',
                'kolner-zeitschrift-fur-soziologie-und-sozialpsychologie',
                'kritische-ausgabe',
                'lancet',
                'language',
                'language-in-society',
                'law1-de',
                'le-mouvement-social',
                'les-journees-de-la-recherche-porcine',
                'lethaia',
                'lettres-et-sciences-humaines-fr',
                'leviathan',
                'lichenologist',
                'limnology-and-oceanography',
                'lncs',
                'lncs2',
                'macromolecular-reaction-engineering',
                'mammal-review',
                'manchester-university-press',
                'marine-policy',
                'matej-bel-university-faculty-of-natural-sciences',
                'mbio',
                'mcgill-guide-v7',
                'mcgill-legal',
                'mcrj7',
                'medecine-sciences',
                'media-culture-and-society',
                'medicine-and-science-in-sports-and-exercise',
                'metabolic-engineering',
                'metallurgical-and-materials-transactions',
                'meteoritics-and-planetary-science',
                'methods-information-medicine',
                'mhra',
                'microbial-ecology',
                'microscopy-and-microanalysis',
                'mis-quarterly',
                'mla',
                'mla-notes',
                'mla-underline',
                'mla-url',
                'molecular-biochemical-parasitology',
                'molecular-biology-and-evolution',
                'molecular-ecology',
                'molecular-psychiatry',
                'molecular-psychiatry-letters',
                'molecular-therapy',
                'multidisciplinary-digital-publishing-institute',
                'multiple-sclerosis-journal',
                'nano-biomedicine-and-engineering',
                'nanotechnology',
                'national-archives-of-australia',
                'national-library-of-medicine-grant',
                'nature',
                'nature-neuroscience-brief-communication',
                'nature-no-superscript',
                'neuropsychologia',
                'neuropsychopharmacology',
                'neurorehabilitation-and-neural-repair',
                'neuroreport',
                'neuroscience-research',
                'new-england-journal-of-medicine',
                'new-phytologist',
                'new-solutions',
                'new-zealand-plant-protection',
                'north-west-university-harvard',
                'northeastern-naturalist',
                'nucleic-acids-research',
                'oecologia',
                'oikos',
                'oncogene',
                'ophthalmology',
                'optical-society-of-america',
                'oral-oncology',
                'organic-geochemistry',
                'organization-science',
                'oryx',
                'oscola',
                'oscola-no-ibid',
                'osterreichische-zeitschrift-fur-politikwissenschaft',
                'oxford-art-journal',
                'padagogische-hochschule-heidelberg',
                'palaeontologia-electronica',
                'palaeontology',
                'paleobiology',
                'pbsjournals-asbp',
                'pediatric-nephrology',
                'pharmacoeconomics',
                'plant-biology',
                'plant-cell',
                'plant-physiology',
                'plos',
                'pnas',
                'political-studies',
                'politische-vierteljahresschrift',
                'pontifical-biblical-institute',
                'presses-universitaires-de-rennes',
                'proceedings-of-the-royal-society-b',
                'protein-science',
                'proteomics',
                'psychiatry-and-clinical-neurosciences',
                'public-health-nutrition',
                'radiopaedia',
                'research-policy',
                'resources-conservation-and-recycling',
                'revista-brasileira-de-botanica',
                'revue-de-medecine-veterinaire',
                'revue-dhistoire-moderne-et-contemporaine',
                'rockefeller-university-press',
                'romanian-humanities',
                'rose-school',
                'royal-society-of-chemistry',
                'rtf-scan',
                'sage-harvard',
                'sage-vancouver',
                'sbl-fullnote-bibliography',
                'scandinavian-political-studies',
                'science',
                'science-of-the-total-environment',
                'science-translational-medicine',
                'science-without-title',
                'sexual-development',
                'small-wiley',
                'social-science-and-medicine',
                'social-studies-of-science',
                'sociedade-brasileira-de-computacao',
                'societe-nationale-des-groupements-techniques-veterinaires',
                'society-for-american-archaeology',
                'society-for-general-microbiology',
                'society-for-historical-archaeology',
                'socio-economic-review',
                'spanish-legal',
                'spie-bios',
                'spie-journals',
                'spip-cite',
                'springer-author-date',
                'springer-plasmonics',
                'springer-vancouver',
                'standards-in-genomic-sciences',
                'stroke',
                'stuttgart-media-university',
                'surgical-neurology-international',
                'tah-gkw',
                'tah-soz',
                'taylor-and-francis-harvard-x',
                'tgm-wien-diplom',
                'the-academy-of-management-review',
                'the-accounting-review',
                'the-american-journal-of-gastroenterology',
                'the-american-journal-of-geriatric-pharmacotherapy',
                'the-american-journal-of-psychiatry',
                'the-british-journal-of-psychiatry',
                'the-british-journal-of-sociology',
                'the-embo-journal',
                'the-historical-journal',
                'the-holocene',
                'the-isme-journal',
                'the-journal-of-comparative-neurology',
                'the-journal-of-eukaryotic-microbiology',
                'the-journal-of-experimental-biology',
                'the-journal-of-immunology',
                'the-journal-of-neuropsychiatry-and-clinical-neurosciences',
                'the-journal-of-neuroscience',
                'the-journal-of-physiology',
                'the-journal-of-the-acoustical-society-of-america',
                'the-journal-of-urology',
                'the-neuroscientist',
                'the-oncologist',
                'the-open-university-a251',
                'the-open-university-harvard',
                'the-open-university-m801',
                'the-open-university-numeric',
                'the-pharmacogenomics-journal',
                'the-plant-journal',
                'theory-culture-and-society',
                'tissue-engineering',
                'toxicon',
                'traces',
                'traffic',
                'transportation-research-record',
                'trends-journal',
                'tu-wien-dissertation',
                'turabian-fullnote-bibliography',
                'un-eclac-cepal-english',
                'un-eclac-cepal-spanish',
                'unctad-english',
                'unified-style-linguistics',
                'unisa-harvard',
                'unisa-harvard3',
                'universidad-evangelica-del-paraguay',
                'universita-di-bologna-lettere',
                'universitat-heidelberg-historisches-seminar',
                'universite-de-liege-histoire',
                'universite-laval-com',
                'university-of-melbourne',
                'urban-forestry-and-urban-greening',
                'urban-habitats',
                'urban-studies',
                'us-geological-survey',
                'user-modeling-and-useradapted-interaction',
                'vancouver',
                'vancouver-brackets',
                'vancouver-superscript',
                'vancouver-superscript-bracket-only-year',
                'veterinary-medicine-austria',
                'veterinary-record',
                'vienna-legal',
                'vingtieme-siecle',
                'virology',
                'water-environment-research',
                'water-research',
                'water-science-and-technology',
                'wceam2010',
                'wetlands',
                'wheaton-college-phd-in-biblical-and-theological-studies',
                'who-europe-harvard',
                'who-europe-numeric',
                'world-journal-of-biological-psychiatry',
                'yeast',
                'zdravniski-vestnik',
                'zeitschrift-fur-medienwissenschaft',
            ])
